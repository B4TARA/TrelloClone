@using Newtonsoft.Json
@model List<TrelloClone.ViewModels.Report.ReportMonthModel>


<div class="home-content">


    <div class="home_content_info">


        <div class="home_content_info_icon">
            <i class="fa-solid fa-folder"></i>
        </div>


        <div class="mid_title">
            Отчет
        </div>


    </div>
</div>


<div class="header_btns_wrapper">


    @foreach (var month in Model)
    {
        <button class="action_btn_icon" onclick="getMonthReport(@(JsonConvert.SerializeObject(month)))">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M2 2h20v2H2z"></path><rect x="5" y="6" width="6" height="16" rx="1"></rect><rect x="13" y="6" width="6" height="12" rx="1"></rect></svg>
        </button>


        <div class="description">@month.MonthName</div>
    }


</div>


<section class="main_container_content" id="main_container_content">
</section>


<script>


    async function getMonthReport(month) {

        const mainContainers = document.getElementById('main_container_content');

        let div = document.createElement('div')
        div.setAttribute("id", "monthReport")
        alert(typeof(month.ReportCardModelLis))

        await fetch('GetMonthReportViewComponent',
            {
                method: 'POST',
                body: JSON.stringify(month.ReportCardModelList)
            })
            .then((response) => response.text())
            .then((data) => {
                const monthReportWrapper = document.getElementById('monthReport');
                if (monthReportWrapper != null) {
                    monthReportWrapper.remove()
                }
                div.innerHTML = data;
                mainContainers.appendChild(div)
            })
    }


</script>