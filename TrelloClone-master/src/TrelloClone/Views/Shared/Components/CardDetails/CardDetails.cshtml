@model TrelloClone.ViewModels.CardDetails


<div class="popup__bg">
    <div class="popup">


        <div class="close-popup" onclick="closeCard(this)"><i class="fa-solid fa-xmark"></i></div>


        <div class="info_popup_card_wrapper">


            <form asp-controller="Card" asp-action="Update">


                <input type="hidden" asp-for="Id" value="@Model.Id" />


                <div class="title_wrapper">
                    <div class="container_description">
                        <input type="text" asp-for="Name" required />

                    </div>
                </div>


                <div class="choose_date_popup_wrapper grid_description_2fr" id="choose_date_popup_wrapper">


                    <div class="container_description first_row_grid_description">
                        <div class="icon_description">
                            <i class="fa-regular fa-calendar"></i>
                        </div>
                        <div class="mid_title">
                            Срок
                        </div>
                    </div>


                    <div class="choose_date_popup_wrapper second_row_grid_description margin_container_bottom_middle">
                        <div></div>
                        <div class="choose_date_wrapper" id="choose_date">
                            <input type="date" asp-for="Term" id="input-datepicker" placeholder="Выберите период" required>
                        </div>
                        <!-- <div class="mid_description">Январь</div> -->
                    </div>


                </div>


                <div class="description_popup_card_wrapper grid_description_2fr margin_container_bottom">


                    <div class="container_description first_row_grid_description">
                        <div class="icon_description">
                            <i class="fa-solid fa-bars" style="color: #0D062D;"></i>
                        </div>

                        <div class="mid_title">
                            Описание
                        </div>
                    </div>


                    <div class="second_row_grid_description" id="description">
                        <div></div>

                        <textarea class="mid_description" id="description_editor" asp-for="Requirement" placeholder="Введите описание"></textarea>
                    </div>


                </div>
                <div class="upload_files_main_wrapper grid_description_2fr margin_container_bottom">
                    <div class="container_description first_row_grid_description">
                        <div class="icon_description">
                            <i class="fa-solid fa-bars" style="color: #0D062D;"></i>
                        </div>

                        <div class="mid_title">
                            Вложения
                        </div>
                    </div>
                    @*<div class="upload_files_wrapper second_row_grid_description" >
                        <div></div>
                        <form action="#" class="form_upload" >
                            <input class="file-input" type="file" name="file" hidden>
                            <i class="fas fa-cloud-upload-alt"></i>
                            <p id="form_upload">Выберите файл для загрузки</p>
                        </form>
                        <section class="progress-area"></section>
                        <section class="uploaded-area"></section>
                    </div>*@

                </div>

                @if (Model.Column > 3)
                {
                    <div class="description_popup_card_wrapper grid_description_2fr margin_container_bottom">


                        <div class="container_description first_row_grid_description">
                            <div class="icon_description">
                                <i class="fa-regular fa-square-check" style="color: #0d062d;"></i>
                            </div>

                            <div class="mid_title">
                                Оценочное суждение работника
                            </div>
                        </div>


                        <div class="second_row_grid_description" id="description">
                            <div></div>
                            @*<div class="select_assessment_wrapper">
                        <select asp-for="EmployeeAssessment" asp-items="Html.GetEnumSelectList<TrelloClone.Models.Enum.Marks>()">
                        </select>
                        </div>*@

                            <div class="select-box" id="selectBox">

                                <div class="options-container" id="options-container">

                                    @foreach (var item in Html.GetEnumSelectList<TrelloClone.Models.Enum.Marks>())
                                    {
                                        <div class="option" onclick="optionClick(this)">
                                            <input type="radio" value="" class="radio" id="film" name="category" disabled />
                                            <label for="film" class="select_user_assessment" itemval="@item.Value">@item.Text</label>
                                        </div>
                                    }

                                </div>


                                <div class="selected_main_wrapper" id="selected_main_wrapper" onclick="selectedContainerOpen()">
                                    <i class="fa-solid fa-chevron-down"></i>
                                    <div class="description" id="descriptionAssessmentVal"></div>
                                    <input class="description" id="valueAsessessment" asp-for="EmployeeAssessment" type="text" hidden textresult="@(((TrelloClone.Models.Enum.Marks)Model.EmployeeAssessment))" required>
                                </div>
                                @*
                            <div class="search-box">
                            <input type="text" placeholder="" id="input_searchbox_assessment">
                            </div>*@

                            </div>

                        </div>


                    </div>


                    <div class="description_popup_card_wrapper grid_description_2fr margin_container_bottom">


                        <div class="container_description first_row_grid_description">
                            <div class="icon_description">
                                <i class="fa-regular fa-comment" style="color: #0D062D;"></i>
                            </div>

                            <div class="mid_title">
                                Комментарий работника
                            </div>
                        </div>


                        <div class="second_row_grid_description" id="description">
                            <div></div>

                            <textarea class="mid_description" id="description_editor" asp-for="EmployeeComment" placeholder="Введите описание" required></textarea>
                        </div>


                    </div>


                    @if (Model.Column > 4)
                    {
                        <div class="description_popup_card_wrapper grid_description_2fr margin_container_bottom">


                            <div class="container_description first_row_grid_description">
                                <div class="icon_description">
                                    <i class="fa-regular fa-square-check" style="color: #0d062d;"></i>
                                </div>

                                <div class="mid_title">
                                    Оценочное непосредственного руководителя
                                </div>
                            </div>


                            <div class="second_row_grid_description" id="description">
                                <div></div>

                                @*<select asp-for="SupervisorAssessment" asp-items="Html.GetEnumSelectList<TrelloClone.Models.Enum.Marks>()">
                                </select>*@
                                <div class="select-box" id="selectBox">

                                    <div class="options-container" id="options-container">

                                        @foreach (var item in Html.GetEnumSelectList<TrelloClone.Models.Enum.Marks>())
                                        {
                                            <div class="option" onclick="optionClick(this)">
                                                <input type="radio" value="" class="radio" id="film" name="category" disabled />
                                                <label for="film" class="select_user_assessment" itemval="@item.Value">@item.Text</label>
                                            </div>
                                        }

                                    </div>


                                    <div class="selected_main_wrapper" id="selected_main_wrapper" onclick="selectedContainerOpen()">
                                        <i class="fa-solid fa-chevron-down"></i>
                                        <div class="description" id="descriptionAssessmentVal"></div>
                                        <input class="description" id="valueAsessessment" asp-for="EmployeeAssessment" type="text" hidden textresult="@(((TrelloClone.Models.Enum.Marks)Model.EmployeeAssessment))" required>
                                    </div>
                                    @*
                            <div class="search-box">
                            <input type="text" placeholder="" id="input_searchbox_assessment">
                            </div>*@

                                </div>
                            </div>


                        </div>


                        <div class="description_popup_card_wrapper grid_description_2fr margin_container_bottom">


                            <div class="container_description first_row_grid_description">
                                <div class="icon_description">
                                    <i class="fa-regular fa-comment" style="color: #0D062D;"></i>
                                </div>

                                <div class="mid_title">
                                    Комментарий непосредственного руководителя
                                </div>
                            </div>


                            <div class="second_row_grid_description" id="description">
                                <div></div>

                                <textarea class="mid_description" id="description_editor" asp-for="SupervisorComment" placeholder="Введите описание" required></textarea>
                            </div>


                        </div>
                    }
                }
                <div class="action_buttons_wrapper">
                    @if (Model.Column != 6)
                    {
                        <button type="submit" class="action_btn primary_btn">
                            <div class="description">Сохранить</div>
                        </button>
                    }


                    @if ((Model.IsActiveLikeEmployee
                    && Convert.ToInt32(User.Claims.FirstOrDefault(c => c.Type == "Id").Value) == Model.UserId
                    && Model.IsActive)
                    )
                    {
                        <button asp-controller="UserBoard" asp-action="MoveCard" asp-route-ColumnId="@Model.ColumnId" asp-route-CardId="@Model.Id" class="action_btn primary_btn">
                            <div class="description">Перевести</div>
                        </button>
                    }


                    else if (Model.IsActiveLikeSupervisor
                    && Convert.ToInt32(User.Claims.FirstOrDefault(c => c.Type == "Id").Value) != Model.UserId
                    && Model.IsActive)
                    {
                        <button asp-controller="UserBoard" asp-action="MoveCard" asp-route-ColumnId="@Model.ColumnId" asp-route-CardId="@Model.Id" class="action_btn primary_btn">
                            <div class="description">Перевести</div>
                        </button>
                    }
                </div>



            </form>
        </div>
    </div>
</div>
